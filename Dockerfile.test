# Minimal container to run PlatformIO native/portduino tests
FROM ubuntu:22.04

ENV DEBIAN_FRONTEND=noninteractive

RUN apt-get update \
    && apt-get install -y --no-install-recommends \
        python3 \
        python3-pip \
        git \
        build-essential \
        cmake \
        pkg-config \
        libssl-dev \
        libncurses5 \
        libsdl2-dev \
        libx11-dev \
        libxext-dev \
        libusb-1.0-0-dev \
        libyaml-cpp-dev \
        libuv1-dev \
        libgpiod-dev \
        libbluetooth-dev \
        libulfius-dev \
        liborcania-dev \
        libmicrohttpd-dev \
        libjansson-dev \
        libgnutls28-dev \
        libcurl4-gnutls-dev \
        libi2c-dev \
        openssl \
        lsb-release \
        cppcheck \
        uuid-dev \
        zlib1g-dev \
        libbsd-dev \
        gdb \
    && pip3 install --no-cache-dir platformio \
    && rm -rf /var/lib/apt/lists/*

WORKDIR /workspace

CMD ["bash"]
