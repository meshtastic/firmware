[esp32c6_base]
extends = esp32_common
custom_esp32_kind = esp32c6

build_flags =
  ${esp32_common.build_flags}
  ; Linker script to align text.handler_execute section to 4 bytes
  -Wl,-Tsrc/platform/esp32/align-text.handler_execute-4.ld
  ; Exclude Paxcounter, it uses 'esp_vhci_host_send_packet' whch is not available on ESP32-C6
  ; https://github.com/espressif/arduino-esp32/issues/11716
  -DMESHTASTIC_EXCLUDE_PAXCOUNTER

build_src_filter = 
 ${esp32_common.build_src_filter}

monitor_speed = 460800
monitor_filters = esp32_c3_exception_decoder

custom_sdkconfig =
  ${esp32_common.custom_sdkconfig}
  ; ESP32c6 doesn't support SD_MMC
  CONFIG_ARDUINO_SELECTIVE_SD_MMC=n
  ; CONFIG_BT_NIMBLE_EXT_ADV=y
  ; CONFIG_BT_NIMBLE_TRANSPORT_EVT_SIZE=257
  ; CONFIG_BT_NIMBLE_MAX_EXT_ADV_INSTANCES=2

lib_ignore =
  ${esp32_common.lib_ignore}
  libpax

lib_deps =
  ${esp32_common.lib_deps}
  # renovate: datasource=git-refs depName=meshtastic-ESP32_Codec2 packageName=https://github.com/meshtastic/ESP32_Codec2 gitBranch=master
  https://github.com/meshtastic/ESP32_Codec2/archive/633326c78ac251c059ab3a8c430fcdf25b41672f.zip
