; LilyGo T-Lora-Pager
[env:tlora-pager]
extends = esp32s3_base
board = t-deck-pro ; same as T-Deck Pro
board_check = true
board_build.partitions = default_16MB.csv
upload_protocol = esptool

build_flags = ${esp32s3_base.build_flags} 
  -I variants/esp32s3/tlora-pager
  -D T_LORA_PAGER 
  -D BOARD_HAS_PSRAM
  -D GPS_POWER_TOGGLE
  -D HAS_SDCARD
  -D SDCARD_USE_SPI1
  -D ENABLE_ROTARY_PULLUP
  -D ENABLE_BUTTON_PULLUP
  -D HALF_STEP

lib_deps = ${esp32s3_base.lib_deps}
  lovyan03/LovyanGFX@1.2.7
  earlephilhower/ESP8266Audio@1.9.9
  earlephilhower/ESP8266SAM@1.0.1
  adafruit/Adafruit DRV2605 Library@1.2.4
  lewisxhe/PCF8563_Library@1.0.1
  lewisxhe/SensorLib@0.3.1
  https://github.com/pschatzmann/arduino-audio-driver/archive/refs/tags/v0.1.3.zip
  https://github.com/mverch67/BQ27220/archive/07d92be846abd8a0258a50c23198dac0858b22ed.zip
  https://github.com/mverch67/RotaryEncoder

[env:tlora-pager-tft]
board_level = extra
extends = env:tlora-pager
build_flags =
  ${env:tlora-pager.build_flags}
  -D CONFIG_DISABLE_HAL_LOCKS=1
  -D INPUTDRIVER_ROTARY_TYPE=1
  -D INPUTDRIVER_ROTARY_UP=40
  -D INPUTDRIVER_ROTARY_DOWN=41
  -D INPUTDRIVER_ROTARY_BTN=7
  -D INPUTDRIVER_BUTTON_TYPE=0
  -D HAS_SCREEN=1
  -D HAS_TFT=1
  -D USE_I2S_BUZZER
  -D RAM_SIZE=5120
  -D LV_LVGL_H_INCLUDE_SIMPLE
  -D LV_CONF_INCLUDE_SIMPLE
  -D LV_COMP_CONF_INCLUDE_SIMPLE
  -D LV_USE_SYSMON=0
  -D LV_USE_PROFILER=0
  -D LV_USE_PERF_MONITOR=0
  -D LV_USE_MEM_MONITOR=0
  -D LV_USE_LOG=0
  -D USE_LOG_DEBUG
  -D LOG_DEBUG_INC=\"DebugConfiguration.h\"
  -D RADIOLIB_SPI_PARANOID=0
  -D LGFX_SCREEN_WIDTH=222
  -D LGFX_SCREEN_HEIGHT=480
  -D DISPLAY_SIZE=480x222 ; landscape mode
  -D DISPLAY_SET_RESOLUTION
  -D LGFX_DRIVER=LGFX_TLORA_PAGER
  -D GFX_DRIVER_INC=\"graphics/LGFX/LGFX_T_LORA_PAGER.h\"
;  -D LVGL_DRIVER=LVGL_T_LORA_PAGER
;  -D LV_USE_ST7796=1
  -D VIEW_480x222
  -D USE_PACKET_API
  -D MAP_FULL_REDRAW

lib_deps =
  ${env:tlora-pager.lib_deps}
  ${device-ui_base.lib_deps}
