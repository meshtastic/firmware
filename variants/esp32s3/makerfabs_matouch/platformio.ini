[matouch_base]
extends = esp32s3_base
board = makerfabs_matouch
board_level = extra
board_upload.flash_size = 16MB
board_build.partitions = default_16MB.csv
board_build.psram = enabled
upload_protocol = esptool
build_flags = ${esp32s3_base.build_flags}
  -I variants/esp32s3/makerfabs_matouch
  -D MAKERFABS_MATOUCH
  -D CONFIG_ARDUHAL_ESP_LOG
  -D CONFIG_ARDUHAL_LOG_COLORS=1
  -D CONFIG_DISABLE_HAL_LOCKS=1
  -D MESHTASTIC_EXCLUDE_CANNEDMESSAGES=1
  -D MESHTASTIC_EXCLUDE_INPUTBROKER=1
  -D MESHTASTIC_EXCLUDE_WEBSERVER=1
  -D MESHTASTIC_EXCLUDE_SERIAL=1
  -D MESHTASTIC_EXCLUDE_SOCKETAPI=1
  -D MESHTASTIC_EXCLUDE_SCREEN=1
  -D LV_LVGL_H_INCLUDE_SIMPLE
  -D LV_CONF_INCLUDE_SIMPLE
  -D LV_COMP_CONF_INCLUDE_SIMPLE
  -D LV_USE_SYSMON=0
  -D LV_USE_PROFILER=0
  -D LV_USE_PERF_MONITOR=0
  -D LV_USE_MEM_MONITOR=0
  -D LV_USE_LOG=0
  -D LV_BUILD_TEST=0
  -D RADIOLIB_DEBUG_SPI=0
  -D RADIOLIB_DEBUG_PROTOCOL=0
  -D RADIOLIB_DEBUG_BASIC=0
  -D RADIOLIB_VERBOSE_ASSERT=0
  -D RADIOLIB_SPI_PARANOID=0
  -D USE_LOG_DEBUG
  -D LOG_DEBUG_INC=\"DebugConfiguration.h\"
  -D HAS_SCREEN=0
  -D HAS_TFT=1
  -D USE_PIN_BUZZER
  -D RAM_SIZE=1024
  -D LGFX_DRIVER_TEMPLATE
  -D LGFX_DRIVER=LGFX_GENERIC
  -D GFX_DRIVER_INC=\"graphics/LGFX/LGFX_GENERIC.h\"
  -D LGFX_PIN_SCK=14
  -D LGFX_PIN_MOSI=13
  -D LGFX_PIN_MISO=12
  -D LGFX_PIN_DC=21
  -D LGFX_PIN_CS=15
  -D LGFX_PIN_RST=-1
  -D LGFX_PIN_BL=48
  -D LGFX_TOUCH_INT=40
  -D VIEW_320x240
  -D USE_PACKET_API
build_src_filter = ${esp32_base.build_src_filter}
lib_deps =
  ${esp32_base.lib_deps}
  ${device-ui_base.lib_deps}
  lovyan03/LovyanGFX@^1.2.0

[touch_ft5x06]
extends = matouch_base
build_flags = ${matouch_base.build_flags}
  -D LGFX_TOUCH=FT5x06
  -D LGFX_TOUCH_I2C_FREQ=400000
  -D LGFX_TOUCH_I2C_PORT=0
  -D LGFX_TOUCH_I2C_ADDR=0x38
  -D LGFX_TOUCH_I2C_SDA=38
  -D LGFX_TOUCH_I2C_SCL=39
  -D LGFX_TOUCH_RST=-1

;https://www.makerfabs.com/esp32-s3-spi-tft-with-touch-ili9488.html
[env:makerfabs_matouch_3_5_spi_ili9488]
extends = matouch_base
build_flags = ${touch_ft5x06.build_flags}
  -D SPI_FREQUENCY=75000000
  -D DISPLAY_SET_RESOLUTION
  -D LGFX_SCREEN_WIDTH=320
  -D LGFX_SCREEN_HEIGHT=480
  -D DISPLAY_SIZE=320x480
  -D LGFX_PANEL=ILI9488
  -D LGFX_ROTATION=0
  -D LGFX_TOUCH_X_MIN=0
  -D LGFX_TOUCH_X_MAX=319
  -D LGFX_TOUCH_Y_MIN=0
  -D LGFX_TOUCH_Y_MAX=479
  -D LGFX_TOUCH_ROTATION=0