[env:mini-epaper-s3]
;custom_meshtastic_hw_model =
custom_meshtastic_hw_model_slug = MINI_EPAPER_S3
custom_meshtastic_architecture = esp32-s3
custom_meshtastic_actively_supported = true
custom_meshtastic_support_level = 1
custom_meshtastic_display_name = LILYGO Mini ePaper S3 E-Ink
custom_meshtastic_images = mini-epaper-s3.svg
custom_meshtastic_tags = LilyGo
custom_meshtastic_requires_dfu = no

extends = esp32s3_base
board = mini-epaper-s3
board_check = true
upload_protocol = esptool

build_flags = 
  ${esp32s3_base.build_flags}
  -I variants/esp32s3/mini-epaper-s3
  -DMINI_EPAPER_S3
  -DPRIVATE_HW ; TODO
  -DUSE_EINK
  -DEINK_DISPLAY_MODEL=GxEPD2_102
  -DEINK_WIDTH=80
  -DEINK_HEIGHT=128
;  -DUSE_EINK_DYNAMICDISPLAY            ; Enable Dynamic EInk
;  -DEINK_LIMIT_FASTREFRESH=0           ; How many consecutive fast-refreshes are permitted    //20
;  -DEINK_LIMIT_RATE_BACKGROUND_SEC=30  ; Minimum interval between BACKGROUND updates          //30
;  -DEINK_LIMIT_RATE_RESPONSIVE_SEC=1   ; Minimum interval between RESPONSIVE updates
;  -DEINK_HASQUIRK_VICIOUSFASTREFRESH   ; Identify that pixels drawn by fast-refresh are harder to clear
;  -DEINK_LIMIT_GHOSTING_PX=1500        ; (Optional) How much image ghosting is tolerated
;  -DEINK_BACKGROUND_USES_FAST          ; (Optional) Use FAST refresh for both BACKGROUND and RESPONSIVE, until a limit is reached.

lib_deps =
  ${esp32s3_base.lib_deps}
  # renovate: datasource=custom.pio depName=GxEPD2 packageName=zinggjm/library/GxEPD2
  zinggjm/GxEPD2@1.6.5
  ;# renovate: datasource=git-refs depName=meshtastic-GxEPD2 packageName=https://github.com/meshtastic/GxEPD2 gitBranch=master
  ;https://github.com/meshtastic/GxEPD2/archive/a05c11c02862624266b61599b0d6ba93e33c6f24.zip
  # renovate: datasource=custom.pio depName=SensorLib packageName=lewisxhe/library/SensorLib
  lewisxhe/SensorLib@0.3.3
