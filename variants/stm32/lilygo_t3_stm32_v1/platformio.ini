[env:lilygo_t3_stm32_v1]
extends = stm32_base
board = lilygo_t3_stm32_v1
board_level = pr
board_upload.maximum_size = 233472 ; reserve the last 28KB for filesystem
build_flags =
  ${stm32_base.build_flags}
  -Ivariants/stm32/lilygo_t3_stm32_v1
  -DSERIAL_UART_INSTANCE=2
  -DPIN_SERIAL_RX=PA10
  -DPIN_SERIAL_TX=PA9
  -DENABLE_HWSERIAL1
  -DPIN_SERIAL1_RX=PA3
  -DPIN_SERIAL1_TX=PA2
  -DPIN_WIRE_SDA=PA5
  -DPIN_WIRE_SCL=PA7
; Serial upload will not work until PlatformIO stm32flash is updated to include this upstream commit:
; https://sourceforge.net/p/stm32flash/code/ci/5530160c67df46c0fff9dcdeb46585b1c8512140/
; As a workaround, flash the built .hex file using STM32CubeProgrammer (or use `upload_protocol = stlink`)
upload_protocol = serial
