; Milesight GS301 Bathroom Odor Detector
; https://www.milesight.com/iot/product/lorawan-sensor/gs301
[env:milesight_gs301]
extends = stm32_base
board = wiscore_rak3172 ; Convenient choice as the same USART is used for programming/debug
board_level = extra
board_upload.maximum_size = 233472 ; reserve the last 28KB for filesystem
build_flags =
  ${stm32_base.build_flags}
  -Ivariants/stm32/milesight_gs301
  -DPRIVATE_HW
  -DMESHTASTIC_EXCLUDE_GPS=1
  -DMESHTASTIC_EXCLUDE_I2C=1 # Analog ADuCM355 (unsupported) so no point building support for I2C in
  -DMESHTASTIC_EXCLUDE_ENVIRONMENTAL_SENSOR=1
  -DMESHTASTIC_EXCLUDE_AIR_QUALITY_SENSOR=1
build_unflags =
  -DDEBUG_MUTE # We have space for debug output until sensor support is added
build_src_filter =
  ${stm32_base.build_src_filter}
  +<../variants/stm32/milesight_gs301>
lib_deps =
  ${stm32_base.lib_deps}

upload_port = stlink
